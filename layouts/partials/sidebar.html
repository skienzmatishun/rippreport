{{ $sidebar := .Site.Params.sidebar.default }}

{{ if eq .Kind "home" }}
    {{ $sidebar = default .Site.Params.sidebar.home .Params.sidebar }}
{{ else if eq .Kind "page" }}
    {{ $sidebar = default .Site.Params.sidebar.single .Params.sidebar }}
{{ else }}
    {{ $sidebar = default .Site.Params.sidebar.list .Params.sidebar }}
{{ end }}

{{ if $sidebar }}
<aside class="sidebar{{ if eq $sidebar "left" }} sidebar--left{{ end }}">
    <div id="mc_embed_shell">
        <link href="//cdn-images.mailchimp.com/embedcode/classic-061523.css" rel="stylesheet" type="text/css">
        <style type="text/css">
            #mc_embed_signup {
                background: #fff;
                clear: left;
                font: 14px Helvetica, Arial, sans-serif;
                width: 600px;
            }
        </style>
        <div style="width: 100%; background: #2d2f32; color: white; padding: 1.25em;" id="mc_embed_signup">
            <form action="https://rippreport.us17.list-manage.com/subscribe/post?u=98481555ada2777e9ee901545&amp;id=874f5e6494&amp;f_id=000f55e0f0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank">
                <!-- Your existing Mailchimp form content -->
            </form>
        </div>
        <script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script>
        <script type="text/javascript">
            (function($) {
                window.fnames = new Array();
                window.ftypes = new Array();
                fnames[0] = 'EMAIL';
                ftypes[0] = 'email';
                fnames[1] = 'FNAME';
                ftypes[1] = 'text';
                fnames[2] = 'LNAME';
                ftypes[2] = 'text';
                fnames[3] = 'BIRTHDAY';
                ftypes[3] = 'birthday';
            }(jQuery));
            var $mcj = jQuery.noConflict(true);
        </script>
    </div>
    <div class="backstory-sidebar">
        <div class="backstory-logo">
            <img src="https://rippreport.com/img/backstory-logo.jpg">
        </div>
        <div class="backstory-social">
            <a href="https://www.facebook.com/BackstoryPodcast/">{{ partial "svg/facebook.svg" (dict "id" "facebook") }}</a>
            <a style="margin-right: 10px;" href="https://rumble.com/user/BackstoryPodcast">{{ partial "svg/rumble.svg" (dict "id" "rumble") }}</a>
            <a href="mailto:backstory@rippreport.com">{{ partial "svg/email.svg" (dict "id" "email") }}</a>
        </div>
    </div>
    <iframe width="100%" height="450" scrolling="no" frameborder="no" allow="autoplay" style="opacity: .8" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/users/696620853&amp;color=%23ff5500&amp;auto_play=false&amp;hide_related=true&amp;show_comments=false&amp;show_user=false&amp;show_reposts=false&amp;show_teaser=false"></iframe>

    {{- $rssURL := "http://www.lagniappemobile.com/search/?f=rss&t=article&c=opinion/columnists/dtt&l=50&s=start_time&sd=desc" -}}
    {{- $numArticles := 8 -}}

    {{- $xmlString := `
    <?xml version="1.0" encoding="utf-8"?>
    <!-- The rest of your XML content -->
    ` -}}

    {{- with .Site.GetPage $rssURL -}}
        <div class="torpedo-widget">
            <h2>{{ .Content.GetElement "channel/title" }}</h2>
            <ul>
                {{- range first $numArticles .Content.GetElements "channel/item" -}}
                    <li>
                        <a href="{{ .GetElement "link" }}">{{ .GetElement "title" }}</a>
                        <p>{{ .GetElement "description" }}</p>
                        <p>Published on {{ .GetElement "pubDate" }}</p>
                    </li>
                {{- end -}}
            </ul>
        </div>
    {{- end }}

    <!-- The rest of your sidebar content -->
</aside>
{{ end }}
